(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2e7381b0"],{"0140":function(e,t,a){},"33bd":function(e,t,a){e.exports=a.p+"static/img/example_excel.b23fea72.png"},cf19:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("div",[l("div",{staticClass:"an"},[l("Answer",{attrs:{data:e.category}})],1)]),l("div",{staticClass:"left1"},[l("el-dialog",{attrs:{title:"资源添加",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[l("Tabs",{attrs:{value:"name1",type:"card"}},[l("TabPane",{attrs:{label:"文本提交",name:"name1"}},[l("div",{staticStyle:{"margin-top":"10px"},attrs:{id:"x"}},[l("el-form",{attrs:{model:e.form}},[l("el-form-item",{attrs:{label:"题型"}},[l("el-radio-group",{attrs:{size:"medium"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[l("el-radio",{attrs:{border:"",label:"选择题"}}),l("el-radio",{attrs:{border:"",label:"填空题"}}),l("el-radio",{attrs:{border:"",label:"问答题"}}),l("el-radio",{attrs:{border:"",label:"判断题"}}),l("el-radio",{attrs:{border:"",label:"解答题"}})],1)],1),l("el-form-item",{attrs:{label:"问题","label-width":e.formLabelWidth}},[l("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.question,expression:"form.question"}],attrs:{id:"",cols:"60",rows:"2"},domProps:{value:e.form.question},on:{input:function(t){t.target.composing||e.$set(e.form,"question",t.target.value)}}})]),l("el-form-item",{attrs:{label:"答案","label-width":e.formLabelWidth}},[l("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.answer,expression:"form.answer"}],attrs:{id:"",cols:"60",rows:"2"},domProps:{value:e.form.answer},on:{input:function(t){t.target.composing||e.$set(e.form,"answer",t.target.value)}}})]),l("el-form-item",{attrs:{label:"解析","label-width":e.formLabelWidth}},[l("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.jx,expression:"form.jx"}],attrs:{id:"",cols:"60",rows:"3"},domProps:{value:e.form.jx},on:{input:function(t){t.target.composing||e.$set(e.form,"jx",t.target.value)}}})]),l("el-form-item",{attrs:{label:"分类","label-width":e.formLabelWidth}},[l("el-select",{attrs:{placeholder:"请选择类别"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},[l("el-option",{attrs:{label:"资格证书",value:"资格证书"}}),l("el-option",{attrs:{label:"模拟真题",value:"模拟真题"}}),l("el-option",{attrs:{label:"IT技术",value:"IT技术"}}),l("el-option",{attrs:{label:"学历教育",value:"学历教育"}}),l("el-option",{attrs:{label:"培训学习",value:"培训学习"}}),l("el-option",{attrs:{label:"综合测试",value:"综合测试"}}),l("el-option",{attrs:{label:"文化常识",value:"文化常识"}}),l("el-option",{attrs:{label:"公共资源",value:"公共资源"}})],1),e._v("\n                自定义类别：\n                "),l("el-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入类别名","suffix-icon":"el-icon-plus"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}})],1)],1)],1)]),l("TabPane",{attrs:{label:"文件导入",name:"name3"}},[l("div",{staticStyle:{padding:"0 10px"}},[l("h3",[e._v("文件导入")]),l("el-upload",{staticClass:"upload-demo",attrs:{drag:"",name:"excel","show-file-list":"","on-success":e.success,action:"/api/excel"},scopedSlots:e._u([{key:"tip",fn:function(){return[l("div",{staticClass:"el-upload__tip"},[e._v("\n                  只能上传 excel 文件\n                ")])]},proxy:!0}])},[l("i",{staticClass:"el-icon-upload"}),l("div",{staticClass:"el-upload__text"},[e._v("\n                将文件拖到此处，或"),l("em",[e._v("点击上传")])])]),l("div",{staticClass:"ints"},[l("h3",[e._v("导入说明")]),l("div",[l("ul",[l("li",[e._v("支持xls和xlsx格式")]),l("li",[e._v("默认第一行导入")]),l("li",[e._v("第一列和第二列为必填项，其他选填")]),l("li",[e._v("\n                    文件导入实例\n                    "),l("img",{attrs:{src:a("33bd"),alt:""}})]),l("li",[l("a",{attrs:{href:"@/assets/example_excel.xlsx"},on:{click:function(t){return e.download()}}},[e._v("点我下载excel模版")])])])])])],1)])],1),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),l("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.add()}}},[e._v("提交")])],1)],1),l("div",{staticClass:"show"},[l("div",{staticClass:"container"},[l("div",{staticClass:"handle-box"},[l("el-button",{staticClass:"handle-del mr10",attrs:{type:"primary",icon:"el-icon-delete"},on:{click:e.delAllSelection}},[e._v("批量删除")]),l("el-select",{staticClass:"handle-select mr10",attrs:{placeholder:"资源分类"},model:{value:e.search.category,callback:function(t){e.$set(e.search,"category",t)},expression:"search.category"}},[l("el-option",{key:"100",attrs:{label:"全部",value:"全部"}}),e._l(e.category,(function(e){return l("el-option",{key:e,attrs:{label:e.name,value:e.name}})}))],2),l("el-input",{staticClass:"handle-input mr10",attrs:{placeholder:"搜索内容"},model:{value:e.search.question,callback:function(t){e.$set(e.search,"question",t)},expression:"search.question"}}),l("el-button",{staticStyle:{"margin-right":"50px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleSearch}},[e._v("搜索")]),e._v("\n\n          每页数量\n          "),l("el-input-number",{attrs:{step:1,"step-strictly":""},model:{value:e.query.pageSize,callback:function(t){e.$set(e.query,"pageSize",t)},expression:"query.pageSize"}}),l("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-upload"},on:{click:function(t){return e.upload()}}},[e._v("上传资源")]),l("el-button",{staticStyle:{"margin-left":"30px"},attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(t){return e.generate()}}},[e._v("导出EXCEL")])],1),l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticClass:"table",attrs:{data:e.tableData,border:"",id:"selectTable","header-cell-class-name":"table-header"},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"55",align:"center"}}),l("el-table-column",{attrs:{prop:"id",label:"id",width:"55",align:"center"}}),l("el-table-column",{attrs:{prop:"question",label:"问题"}}),l("el-table-column",{attrs:{prop:"answer",label:"答案"}}),l("el-table-column",{attrs:{prop:"jx",label:"解析",align:"center"}}),l("el-table-column",{attrs:{prop:1==e.type?"选择题":"问答题",label:"题型"}}),l("el-table-column",{attrs:{prop:"select",label:"选择题选项"}}),l("el-table-column",{attrs:{prop:"category",label:"分类",align:"center"}}),l("el-table-column",{attrs:{prop:"user",label:"上传者",align:"center"}}),l("el-table-column",{attrs:{prop:"time",label:"上传时间",align:"center"}}),l("el-table-column",{attrs:{label:"状态",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-tag",{attrs:{type:1==t.row.status?"success":"danger"}},[e._v(e._s(1==t.row.status?"正常":0==t.row.status?"禁用":"状态未定"))])]}}])}),l("el-table-column",{attrs:{prop:"time",label:"修改时间",align:"center"}}),l("el-table-column",{attrs:{label:"操作",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{type:"text",icon:"el-icon-edit"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),l("el-button",{staticClass:"red",staticStyle:{color:"red"},attrs:{type:"text",icon:"el-icon-delete"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),l("div",{staticClass:"pagination"},[l("el-pagination",{attrs:{background:"",layout:"total, sizes, prev, pager, next, jumper","current-page":e.query.pageIndex,"page-size":e.query.pageSize,total:e.query.count,"page-sizes":[10,100,200,300]},on:{"size-change":e.handleSizeChange,"current-change":e.handlePageChange}})],1)],1)])],1)])},o=[],n=(a("6b54"),a("87b3"),a("386d"),function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)}),i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{width:"100%",height:"500px"},attrs:{id:"answer"}})])}],s=(a("7f7f"),a("313e")),r={props:["data"],data:function(){return{}},methods:{getTime:function(){var e=new Date,t="-",a=e.getFullYear(),l=e.getMonth()+1,o=e.getDate();l>=1&&l<=9&&(l="0"+l),o>=0&&o<=9&&(o="0"+o);var n=a+t+l+t+o;return n},getData:function(){var e=this;this.$axios.get("/getBankAnswerCategory").then((function(t){e.data=t.data.data,console.log(t.data)}))},tu:function(){for(var e=s["init"](document.getElementById("answer")),t=[],a=0;a<this.data.length;a++)t[a]={value:this.data[a].count,name:this.data[a].name};console.log(t),e.setOption({title:{text:"问答库类别统计",subtext:this.getTime(),left:"left"},tooltip:{trigger:"item"},legend:{orient:"horizontal",left:"center",bottom:"bottom"},series:[{name:"数量",type:"pie",radius:"50%",data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]})}},mounted:function(){var e=this;console.log("接受数据-------"),this.tu();var t=s["init"](document.getElementById("answer")),a=0;setInterval((function(){for(var l=[],o=0;o<e.data.length;o++)l[o]={value:e.data[o].count,name:e.data[o].name};console.log(l);t.setOption({title:{text:"问答库类别统计",subtext:e.getTime(),left:"left"},tooltip:{trigger:"item"},legend:{orient:"horizontal",left:"center",bottom:"bottom"},series:[{name:"数量",type:"pie",radius:"50%",data:l,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]});if(100==a)return 0;console.log(a),a+=1}),1e3)}},c=r,u=a("2877"),d=Object(u["a"])(c,n,i,!1,null,null,null),g=d.exports,p=a("4328"),m=a.n(p),h={components:{Answer:g},data:function(){return{select:!0,dialogFormVisible:!1,labelPosition:"right",query:{pageIndex:1,pageSize:10,count:100},form:{question:"",answer:"",category:"公共资源",user:"admin",status:1,type:"问答题",jx:"",select:""},search:{category:"全部",question:null},loading:!0,tableData:[],edit_id:null,multipleSelection:[],delList:[],category:[],formLabelWidth:"120px"}},methods:{add:function(){var e=this;console.log(this.form),this.$axios.post("/addBankAnswer",m.a.stringify(this.form)).then((function(t){e.$message({message:t.data.msg,type:"success"}),console.log(t.data),e.dialogFormVisible=!1,e.getData()})).catch((function(e){console.log(e)}))},upload:function(){this.dialogFormVisible=!0},getData:function(){var e=this;this.$axios.get("/getBankAnswerList",{params:{page:this.query.pageIndex,eachPageNum:this.query.pageSize}}).then((function(t){e.tableData=t.data.data,e.query.count=t.data.count,e.category=t.data.category,e.loading=!1,console.log(t.data)})).catch((function(e){console.log(e)}))},download:function(){window.open("")},getSearchData:function(){var e=this;this.$axios.get("/getSearchBankAnswer",{params:{question:this.search.question,category:this.search.category,page:this.query.pageIndex,eachPageNum:this.query.pageSize}}).then((function(t){e.tableData=t.data.data,e.query.count=t.data.count,console.log(t.data),e.loading=!1})).catch((function(e){console.log(e)}))},generate:function(){var e=new Date;this.$htmlToExcel.getExcel("#selectTable",e.getFullYear().toString()+e.getMonth().toString()+e.getDate().toString()+e.getDay().toString()+e.getHours().toString()+e.getMinutes().toString()+e.getSeconds().toString())},handleSearch:function(){this.loading=!0,this.$set(this.query,"pageIndex",1),this.getSearchData()},handleDelete:function(e,t){var a=this;console.log(e),console.log(t),this.$confirm("确定要删除吗？","提示",{type:"warning"}).then((function(){var l=[t.id];a.delSingleSelection(l),a.tableData.splice(e,1)})).catch((function(){}))},handleSelectionChange:function(e){this.multipleSelection=e},delSingleSelection:function(e){var t=this;console.log(e),this.$axios({method:"post",url:"/delBankAnswer",headers:{"content-type":"application/json"},data:e}).then((function(e){console.log(e.data),t.$message.error(e.data.msg),t.getData()})).catch((function(e){console.log(e)}))},delAllSelection:function(){var e=this;console.log(this.multipleSelection);for(var t=new Array(this.multipleSelection.length),a=0;a<this.multipleSelection.length;a++)t[a]=this.multipleSelection[a].id;this.tableData.splice(0,this.query.pageSize),console.log(t),this.$axios({method:"post",url:"/delBankAnswer",headers:{"content-type":"application/json"},data:t}).then((function(t){console.log(t.data),e.$message.error(t.data.msg),e.getData()})).catch((function(e){console.log(e)}))},handleEdit:function(e,t){console.log(t),this.dialogFormVisible=!0,this.user=t},saveEdit:function(){var e=this;this.$axios.post("/setUser",m.a.stringify(this.user)).then((function(t){e.$message({message:t.data.msg,type:"success"}),console.log(t.data),e.getData(),e.dialogFormVisible=!1})).catch((function(e){console.log(e)}))},success:function(e,t,a){console.log(e),this.$message({message:e.message,type:"success"}),this.getData(),console.log(t),console.log(a)},handlePageChange:function(e){this.loading=!0,this.$set(this.query,"pageIndex",e),this.getData()},handleSizeChange:function(e){this.loading=!0,this.query.pageSize=e,this.getData(),console.log("每页 ".concat(e," 条"))}},created:function(){this.getData()}},f=h,b=(a("d3d3"),Object(u["a"])(f,l,o,!1,null,null,null));t["default"]=b.exports},d3d3:function(e,t,a){"use strict";a("0140")}}]);