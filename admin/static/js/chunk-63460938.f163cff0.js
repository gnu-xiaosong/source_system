(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-63460938"],{"00af":function(e,t,s){"use strict";s("3897")},"0cfb":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"setting"},[s("div",{staticClass:"form-box"},[s("el-form",{attrs:{"label-width":"auto"}},[s("el-form-item",{attrs:{label:"网站名称"}},[s("el-input",{model:{value:e.web.web_title,callback:function(t){e.$set(e.web,"web_title",t)},expression:"web.web_title"}})],1),s("el-form-item",{attrs:{label:"网站关键词"}},[s("el-input",{model:{value:e.web.web_keyword,callback:function(t){e.$set(e.web,"web_keyword",t)},expression:"web.web_keyword"}})],1),s("el-form-item",{attrs:{label:"网站备案号"}},[s("el-input",{model:{value:e.web.web_beian,callback:function(t){e.$set(e.web,"web_beian",t)},expression:"web.web_beian"}})],1),s("el-form-item",{attrs:{label:"备案号跳转链接"}},[s("el-input",{model:{value:e.web.web_beian_url,callback:function(t){e.$set(e.web,"web_beian_url",t)},expression:"web.web_beian_url"}})],1),s("el-form-item",{attrs:{label:"网站版权信息"}},[s("el-input",{model:{value:e.web.web_copyright,callback:function(t){e.$set(e.web,"web_copyright",t)},expression:"web.web_copyright"}})],1),s("el-form-item",{attrs:{label:"站点描述"}},[s("el-input",{attrs:{type:"textarea",rows:"5"},model:{value:e.web.web_description,callback:function(t){e.$set(e.web,"web_description",t)},expression:"web.web_description"}})],1),s("el-form-item",{attrs:{label:"网站幻灯片"}},[s("input",{ref:"file1",attrs:{type:"file",accept:"image/*",name:"file1"},on:{change:function(t){return e.upload()}}}),s("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.is_show1,expression:"is_show1"}],attrs:{percentage:e.percentage,status:e.status}}),s("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},e._l(e.srcList,(function(t,a){return s("el-col",{key:a,attrs:{span:6}},[s("div",{staticClass:"demo-image__preview",staticStyle:{"margin-buttom":"7px"},attrs:{"border-radius":"2px"}},[s("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.img_path,"preview-src-list":[t.img_path]}}),s("el-button",{staticStyle:{"margin-left":"30%"},attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(s){return e.deleteSlide(t.id)}}})],1)])})),1)],1),s("el-form-item",{attrs:{label:"网站logo"}},[s("input",{ref:"file",attrs:{type:"file",accept:"image/*",name:"file"},on:{change:function(t){return e.upload_logo()}}}),s("el-progress",{directives:[{name:"show",rawName:"v-show",value:e.is_show2,expression:"is_show2"}],attrs:{percentage:100,status:e.status}}),s("el-row",{staticStyle:{"margin-top":"5px"},attrs:{gutter:20}},[s("div",{staticClass:"block"},[s("el-avatar",{attrs:{shape:"square",size:"large",src:e.web.web_logo}})],1)])],1),s("el-form-item",{attrs:{label:"站点状态"}},[s("el-switch",{model:{value:e.web.status,callback:function(t){e.$set(e.web,"status",t)},expression:"web.status"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:function(t){return e.onSubmit()}}},[e._v("保存")])],1)],1)],1)])])},i=[],o={name:"setting",data:function(){return{is_show1:!1,is_show2:!1,percentage:0,status:"",web:{},url:"https://fuss10.elemecdn.com/e/5d/4a731a90594a4af544c0c25941171jpeg.jpeg",srcList:{}}},methods:{upload:function(){var e=this;this.is_show1=!0,console.log("执行");var t=new FormData;t.append("file",this.$refs.file1.files[0]),this.$axios.post("/upload_admin_slide",t,{"Content-Type":"multipart/form-data"}).then((function(t){e.progress(),console.log(t.data),200!=t.data.code?(e.status="exception",e.is_show1=!1,e.$message.error(t.data.msg)):(e.status="success",e.is_show1=!1,e.$message.success(t.data.msg),e.getSlide())})).catch((function(t){e.$message.error(t),console.log(t)}))},deleteSlide:function(e){var t=this;this.$confirm("此操作删除该图片, 是否继续?","提示",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then((function(){t.$axios.get("/delete_admin_slide",{params:{id:e}}).then((function(e){200!=e.data.code?t.$message.error(e.data.msg):(t.$message.success(e.data.msg),t.getSlide())}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},getSlide:function(){var e=this;this.$axios.get("/get_admin_slide").then((function(t){200!=t.data.code?e.$message.error(t.data.msg):e.srcList=t.data.data})).catch((function(t){e.$message.error(t),console.log(t)}))},getWebData:function(){var e=this;this.$axios.get("/getWebAdminData").then((function(t){200!=t.data.code?e.$message.error(t.data.msg):e.web=t.data.data})).catch((function(t){e.$message.error(t),console.log(t)}))},upload_logo:function(){var e=this;this.is_show2=!0;var t=new FormData;t.append("ID",this.web.ID),t.append("file",this.$refs.file.files[0]),this.$axios.post("/updateLog",t,{"Content-Type":"multipart/form-data"}).then((function(t){e.progress(),console.log(t.data),200!=t.data.code?(e.status="exception",e.is_show2=!1,e.$message.error(t.data.msg)):(e.status="success",e.is_show2=!1,e.$message.success(t.data.msg),e.getSlide())})).catch((function(e){console.log(e)}))},onSubmit:function(){var e=this;this.$axios({method:"post",url:"/setWebAdmin",headers:{"content-type":"application/json"},data:this.web}).then((function(t){console.log(t.data),e.$message.success(t.data.msg)})).catch((function(e){console.log(e)}))},progress:function(){var e=setInterval((function(){this.percentage++,100==this.percentage&&clearInterval(e)}),2e3)}},mounted:function(){this.getWebData(),this.getSlide()}},n=o,r=(s("00af"),s("2877")),l=Object(r["a"])(n,a,i,!1,null,null,null);t["default"]=l.exports},3897:function(e,t,s){}}]);