(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{c8a8:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("q-toggle",{staticStyle:{"margin-left":"15px"},attrs:{label:"调整大小"},model:{value:t.dense,callback:function(e){t.dense=e},expression:"dense"}}),i("q-input",{staticStyle:{margin:"25px"},attrs:{outlined:"",standout:"bg-teal text-white",label:"请输入文件描述…",dense:t.dense},model:{value:t.update.description,callback:function(e){t.$set(t.update,"description",e)},expression:"update.description"}}),i("q-input",{staticStyle:{margin:"25px"},attrs:{outlined:"",standout:"bg-teal text-white",label:"请输入文件自定义标签…",dense:t.dense},model:{value:t.update.label,callback:function(e){t.$set(t.update,"label",e)},expression:"update.label"}}),i("q-input",{staticStyle:{margin:"25px"},attrs:{outlined:"",standout:"bg-teal text-white",label:"请输入文档归类id值(只能为整数)…",dense:t.dense},on:{blur:function(e){return e.preventDefault(),t.changeCount()}},model:{value:t.doc_id,callback:function(e){t.doc_id=e},expression:"doc_id"}}),i("q-select",{staticStyle:{width:"250px","margin-left":"25px"},attrs:{label:"选择分类","transition-show":"jump-up","transition-hide":"jump-up",filled:"",options:t.options,outlined:""},model:{value:t.classify,callback:function(e){t.classify=e},expression:"classify"}}),i("div",{staticClass:"q-pa-md"},[i("div",{staticClass:"q-gutter-sm row items-start"},[i("q-uploader",{ref:"file",staticStyle:{"max-width":"100%",margin:"0 auto"},attrs:{label:"支持多文件上传",multiple:""}})],1)]),i("q-btn",{staticClass:"float-right ",staticStyle:{width:"100px","margin-top":"25px","margin-right":"25px","margin-bottom":"200px"},attrs:{loading:t.loading,color:"primary"},on:{click:function(e){return t.submitData()}},scopedSlots:t._u([{key:"loading",fn:function(){return[i("q-spinner-hourglass",{staticClass:"on-left"}),t._v("\n        上传中...\n      ")]},proxy:!0}])},[t._v("\n      上传\n      ")])],1)},s=[],l=(i("a4d3"),i("e01a"),{data:function(){return{reData:"",loading:!1,text:"测试",model:[],classify:null,tip:"哦肉诺",update:{label:null,description:null},doc_id:"",dense:!0,options:["资格证书","招聘真题","IT技术","学历教育","综合测试","培训学习","文化常识","公共资源"]}},methods:{submitData:function(){var t=this;if(console.log(this.$refs.file.files),console.log(this.model),""==this.update.description||null==this.update.description)this.$q.notify({message:"文件描述不能为空!",position:"top",color:"warning"});else if(null==this.update.label||""==this.update.label)this.$q.notify({message:"文件标签不能为空!",position:"top",color:"warning"});else if(null==this.doc_id||""==this.doc_id)this.$q.notify({message:"文件归类唯一id不能为空!",position:"top",color:"warning"});else if(null==this.classify||""==this.classify)this.$q.notify({message:"请输入文件分类！",position:"top",color:"warning"});else if(0==this.$refs.file.files.length)this.$q.notify({message:"请选择文件！",position:"top",color:"warning"});else{this.loading=!0;for(var e=new FormData,i=[],o=0;o<this.$refs.file.files.length;o++)i.push(this.$refs.file.files[o]);console.log("文件列表:"),console.log(i);for(var s=0;s<i.length;s++)console.log(i[s]),e.append("file[]",i[s]);e.append("description",this.update.description),e.append("label",this.update.label),e.append("user","用户上传"),e.append("classify",this.classify),e.append("doc_id",this.doc_id);var l={headers:{"Content-Type":"multipart/form-data;boundary="+(new Date).getTime()}};this.$axios.post("/fileSubmit",e,l).then((function(e){console.log("返回数据:"),console.log(e.data),200==e.data.code?(t.$q.notify({message:"上传成功！",position:"top",color:"purple"}),t.reData=e.data,t.update.description=null,t.classify=null,t.update.label=null,t.doc_id="",t.$refs.file.files=[],t.loading=!1):t.$q.notify({message:"未知错误，上传失败！",position:"top",color:"purple"})})).catch((function(t){console.log(t)}))}},changeCount:function(){var t=this;console.log(this.doc_id),null==this.doc_id||""==this.doc_id?this.$q.notify({message:"该文件归类id值不能为空！",position:"top",color:"purple"}):this.$axios.get("/ruler",{params:{doc_id:this.doc_id}}).then((function(e){1==e.data&&t.$q.notify({message:"该文件归类id值已经存在,请更换！",position:"top",color:"purple"})})).catch((function(e){t.$q.notify({message:e,position:"top",color:"purple"}),console.log(e)}))}},mounted:function(){console.log(this.model)}}),n=l,a=i("2877"),d=i("9564"),p=i("27f9"),c=i("ddd8"),r=i("ee89"),u=i("9c40"),f=i("9149"),g=i("eebe"),h=i.n(g),m=Object(a["a"])(n,o,s,!1,null,null,null);e["default"]=m.exports;h()(m,"components",{QToggle:d["a"],QInput:p["a"],QSelect:c["a"],QUploader:r["a"],QBtn:u["a"],QSpinnerHourglass:f["a"]})}}]);